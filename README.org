* Basic customization

  (package-initialize)
  
  Maximize screen on starup
  #+BEGIN_SRC emacs-lisp
  (add-to-list 'default-frame-alist '(fullscreen . maximized))
  #+END_SRC

  Add additional package sources
  #+BEGIN_SRC emacs-lisp
    (require 'package)
    (add-to-list 'package-archives '("melpa" . "http://melpa.org/packages/"))
  #+END_SRC

  Add additional package sources
  #+BEGIN_SRC emacs-lisp
    (require 'package)
    (add-to-list 'package-archives '("melpa" . "http://melpa.org/packages/"))
  #+END_SRC

  In case I'm on work machine, use https instead of http
  #+BEGIN_SRC emacs-lisp
    (add-to-list 'package-archives '("melpa" . "https://melpa.org/packages/"))
    (add-to-list 'package-archives '("gnu" . "https://elpa.gnu.org/packages/"))
    (package-initialize) ;; Important line for helm-gtags to be found. It initializes some installed packages (which cannot be initialized with their default auto-(require 'helm-gtags)  
  #+END_SRC

  Load updates from these sources. Or 'use-package' will not be available
  #+BEGIN_SRC emacs-lisp
    (when (not package-archive-contents)
      (package-refresh-contents))
  #+END_SRC


  Install 'use-package'
  #+BEGIN_SRC emacs-lisp
    (unless (package-installed-p 'use-package)
      (package-install 'use-package))
  #+END_SRC
  

  Make all the packages be loaded with 'use-package' instruction
  #+BEGIN_SRC emacs-lisp
    (require 'use-package)
    (setq use-package-always-ensure t)
  #+END_SRC

  To enable emacs-client programm for committing
  #+BEGIN_SRC emacs-lisp
    (use-package server)
    (unless (server-running-p) (server-start))
  #+END_SRC
    
  Speedbar customization
  #+BEGIN_SRC emacs-lisp
    (use-package sr-speedbar)
    (global-set-key "\C-c\C-s" 'sr-speedbar-toggle)
    (setq speedbar-show-unknown-files t)
    (setq sr-speedbar-right-side nil)
    (setq sr-speedbar-skip-other-window-p t)
  #+END_SRC

  #+BEGIN_SRC emacs-lisp
    (add-to-list 'load-path "~/.emacs.d/custom")
  #+END_SRC

#+BEGIN_SRC emacs-lisp
  ;;(define-key dired-mode-map (kbd "<return>")   'dired-find-alternate-file)
  (define-key dired-mode-map (kbd "C-M-u")   'dired-up-directory)
#+END_SRC

#+BEGIN_SRC emacs-lisp
  ;;;;;;;;;; Disable startup-screen ;;;;;;;;;;
  ;(setq inhibit-startup-screen 1)

  ;;;;;;;;;; Show column number (along with line number) ;;;;;;;;;;
  ;;(column-number-mode 1)

  ;;;;;;;;;; Enable filebrowser on the left ;;;;;;;;;;
  ;;(global-set-key "\C-s\C-n" `neotree-toggle)


  ;; (global-set-key "\C-cb" 'windmove-left)
  ;; (global-set-key "\C-cf" 'windmove-right)
  ;; (global-set-key "\C-cp" 'windmove-up)
  ;; (global-set-key "\C-cn" 'windmove-down)
#+END_SRC

* Python
  #+BEGIN_SRC emacs-lisp
    (setq python-command "/usr/bin/python3.4")
    ;; (use-package posframe)
    (use-package anaconda-mode)
    (add-hook 'python-mode-hook 'anaconda-mode)
    (eval-after-load 'python
      '(define-key python-mode-map "\C-xpb" 'python-nav-backward-block))
    (eval-after-load 'python
      '(define-key python-mode-map "\C-xpl" 'python-nav-backward-up-list))
    (eval-after-load 'python
      '(define-key python-mode-map "\C-xpf" 'python-nav-forward-block))
    (eval-after-load 'python
      '(define-key python-mode-map "\C-xpm" 'python-mark-defun))
    (eval-after-load 'python
      '(define-key python-mode-map "\C-xpm" 'python-mark-defun))
    (eval-after-load 'python
      '(define-key python-mode-map "\M-i" 'anaconda-mode-complete))
  #+END_SRC



#+BEGIN_SRC emacs-lisp
  
#+END_SRC


#+BEGIN_SRC emacs-lisp
  
#+END_SRC


#+BEGIN_SRC emacs-lisp
  
#+END_SRC


#+BEGIN_SRC emacs-lisp
  
#+END_SRC


#+BEGIN_SRC emacs-lisp
  
#+END_SRC

* Lua
#+BEGIN_SRC emacs-lisp
  ;; (defun my-lua-mode-hook ()
  ;;   (setq lua-indent-level 4)
  ;;   )
  ;; (add-hook 'lua-mode-hook 'my-lua-mode-hook)
#+END_SRC

* C/C++

C++ IDE setup
Guide: https://tuhdo.github.io/c-ide.html

** Generate tags
    Define function to create GTAGS files
    #+BEGIN_SRC emacs-lisp
      (defun create-tags (dir-name)
        "Create tags file."
        (interactive "DDirectory: ")
        (shell-command
         (format "gtags %s" (directory-file-name dir-name)))
        )
    #+END_SRC
    
** Code-style
    Helm guide: https://tuhdo.github.io/helm-intro.html ;;;;;;;;;;
    Download helm-gtags: https://github.com/syohex/emacs-helm-gtags
    #+BEGIN_SRC emacs-lisp
        (defun my-c-mode-common-hook ()
        (c-set-style "Stroustrup")
        ;; Show lines
        (linum-mode 1)
        ;; Following command affects to c-toggle-auto-newline
        ;; That is automatically indent line after inserting
        ;; one of {, }, :, #, ;, ,, <, >, /, *, (, and ).
        (c-toggle-electric-state 1)
        ;; Indent size
        (setq c-basic-offset 4)
        ;; Enable autocomplition mode
        ;; (auto-complete-mode 1)
        ;; Do not insert new line after ';' or ','
        (setq c-hanging-semi&comma-criteria nil)
        (setq comment-start "//"  comment-end   "")
        )
      (add-hook 'c-mode-common-hook 'my-c-mode-common-hook)
    #+END_SRC
    
* Shell/terminals
** Shell
For proper processing of shell colors
#+BEGIN_SRC emacs-lisp
  (autoload 'ansi-color-for-comint-mode-on "ansi-color" nil t)
  (add-hook 'shell-mode-hook 'ansi-color-for-comint-mode-on)
#+END_SRC

#+BEGIN_SRC emacs-lisp
  ;;  (global-set-key "\M-\r" 'shell-resync-dirs)
#+END_SRC

#+BEGIN_SRC emacs-lisp
  ;;
  ;;;;;;;;;; To get colorized output from shell-mode ;;;;;;;;;;
  ;;
  ;; (require 'ansi-color)
  ;; (defun ansi-color-apply-on-buffer ()
  ;;     (ansi-color-apply-on-region (point-min) (point-max)))
  ;; (defun ansi-color-apply-on-minibuffer ()
  ;;   (let ((bufs (remove-if-not
  ;;                (lambda (x) (string-starts-with (buffer-name x) " *Echo Area"))
  ;;                (buffer-list))))
  ;;     (dolist (buf bufs)
  ;;       (with-current-buffer buf
  ;;         (ansi-color-apply-on-buffer)))))
  ;; (defun ansi-color-apply-on-minibuffer-advice (proc &rest rest)
  ;;   (ansi-color-apply-on-minibuffer))
  ;; (advice-add 'shell-command :after #'ansi-color-apply-on-minibuffer-advice)
  ;; (advice-remove 'shell-command #'ansi-color-apply-on-minibuffer-advice)
  ;; (defun add-test-function (cmd)
  ;;   (interactive "sCommand to run: ")
  ;;   (setq my-testall-test-function cmd)
  ;;   (defun my-testall ()
  ;;     (interactive)
  ;;     (shell-command my-testall-test-function))
  ;;   (local-set-key [f9] 'my-testall))
  ;; (defun my-shell-execute(cmd)
  ;;   (interactive "sShell command: ")
  ;;   (shell (get-buffer-create "my-shell-buf"))
  ;;   (process-send-string (get-buffer-process "my-shell-buf") (concat cmd "\n")))
  ;; (add-hook 'shell-mode-hook 'ansi-color-for-comint-mode-on)
#+END_SRC

* Magit
#+BEGIN_SRC emacs-lisp
  (use-package magit)
  (global-unset-key "\C-xm")
  (global-set-key (kbd "\C-xms") 'magit-status)
#+END_SRC

* Usefull routines
#+NAME: htop
#+BEGIN_SRC emacs-lisp
  (defun htop ()
    (interactive)
    (if (get-buffer "*htop*")
        (switch-to-buffer "*htop*")
      (ansi-term "/bin/bash" "htop")
      (comint-send-string "*htop*" "htop\n")))
#+END_SRC

